version: 2
models:
- name: dbt_orders
  description: 'All the orders.'
  meta:
    label: Orders
  columns:
  - name: order_id
    description: 'Unique Order ID for the order.'
    meta:
      metrics:
        order_count:
          type: count_distinct
  - name: order_date
    description: 'Timestamp of order placement by user.'
  - name: partner_id
    description: 'ID of the partner that is fulfilling the order.'
  - name: partner_name
    description: 'Full name of the partner that is fulfilling the order.'
  - name: partner_commission
    description: 'Commission rate the specified parter charges, as a decimal fraction.'
  - name: currency
    description: 'Three letter international currency code for the currency the order was paid with.'
  - name: basket_total
    description: 'Sum of item prices for each item within the basket.'
    meta:
      dimension:
        hidden: true
      metrics:
        total_revenue:
          type: sum
          format: 'usd'
          label: Revenue
        average_basket_size:
          type: average
          format: 'usd'
  - name: profit
    description: 'Sum of item profits within the basket. Thus, the total profit of the order.'
    meta:
      dimension:
        hidden: true
      metrics:
        total_profit:
          type: sum
          format: 'usd'
          label: Profit
  - name: referrer
    description: 'Source from which the user was linked to the Thyme to Shine website.'
  - name: user_id
    description: 'Unique user ID for the user that placed the order.'
    meta:
      metrics:
        total_unique_users:
          type: count_distinct
  - name: email
    description: 'Email address of the user that placed the order.'
    meta:
      dimension:
        urls:
          - url: 'mailto:${value.raw}?subject=Hello from Thyme Team!'
            label: Send email
  - name: user_created_date
    description: 'Timestamp of user creation.'
  - name: browser
    description: 'Web browser that the user used to place the order.'
  - name: shipping_city
    description: 'Shipping city of the user that placed the order.'
  - name: shipping_country
    description: 'Shipping country of the user that placed the order.'
